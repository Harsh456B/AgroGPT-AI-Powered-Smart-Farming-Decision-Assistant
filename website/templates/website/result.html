<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AgroGPT - AI Analysis Results</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 25%, #16213e 50%, #0f3460 75%, #0a0a0a 100%);
            color: #fff;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(120, 219, 255, 0.3) 0%, transparent 50%);
            pointer-events: none;
            z-index: -1;
        }

        /* Smoke Color Utility Classes */
        .smoke-bg {
            background: rgba(245, 245, 245, 0.95);
            color: #222;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .smoke-card {
            background: rgba(245, 245, 245, 0.9);
            color: #333;
            border-radius: 16px;
            padding: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            transition: all 0.3s ease;
        }

        .smoke-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
        }

        .smoke-section {
            background: rgba(245, 245, 245, 0.85);
            color: #333;
            border-radius: 20px;
            padding: 30px;
            margin: 20px 0;
            box-shadow: 0 6px 25px rgba(0, 0, 0, 0.08);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.25);
        }

        .smoke-text {
            color: #555;
            font-weight: 500;
        }

        .smoke-border {
            border: 2px solid rgba(245, 245, 245, 0.8);
            border-radius: 8px;
            padding: 15px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            padding: 30px 0;
            animation: fadeInDown 1s ease-out;
        }

        .header h1 {
            color: #00d4ff;
            font-size: 3.5em;
            margin-bottom: 10px;
            text-shadow: 0 0 30px rgba(0, 212, 255, 0.8);
            background: linear-gradient(45deg, #00d4ff, #0099cc, #00d4ff);
            background-size: 200% 200%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: gradientShift 3s ease-in-out infinite;
        }

        .back-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            background: linear-gradient(45deg, #00d4ff, #0099cc);
            color: #000;
            border: none;
            padding: 15px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s ease;
            z-index: 1000;
            box-shadow: 0 5px 15px rgba(0, 212, 255, 0.3);
        }

        .back-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0, 212, 255, 0.5);
        }

        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }

        .result-card {
            background: rgba(26, 26, 46, 0.9);
            border-radius: 25px;
            padding: 30px;
            box-shadow: 0 15px 35px rgba(0, 212, 255, 0.2);
            border: 2px solid rgba(0, 212, 255, 0.3);
            animation: slideInUp 0.8s ease-out;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }

        .result-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 212, 255, 0.3);
        }

        .result-card h3 {
            color: #00d4ff;
            margin-bottom: 20px;
            font-size: 1.5em;
            display: flex;
            align-items: center;
            gap: 12px;
            text-shadow: 0 0 10px rgba(0, 212, 255, 0.5);
        }

        .result-card i {
            text-shadow: 0 0 10px rgba(0, 212, 255, 0.8);
        }

        .suitability-score {
            font-size: 3em;
            font-weight: bold;
            color: #00d4ff;
            text-align: center;
            margin: 20px 0;
            text-shadow: 0 0 20px rgba(0, 212, 255, 0.8);
        }

        .score-bar {
            width: 100%;
            height: 20px;
            background: rgba(0, 212, 255, 0.2);
            border-radius: 10px;
            overflow: hidden;
            margin: 15px 0;
            position: relative;
        }

        .score-fill {
            height: 100%;
            background: linear-gradient(90deg, #00d4ff, #0099cc);
            border-radius: 10px;
            transition: width 1s ease;
            position: relative;
            overflow: hidden;
        }

        .score-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            animation: shimmer 2s infinite;
        }

        .info-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid rgba(0, 212, 255, 0.2);
        }

        .info-item:last-child {
            border-bottom: none;
        }

        .info-label {
            color: #b8b8b8;
            font-weight: 500;
        }

        .info-value {
            color: #00d4ff;
            font-weight: bold;
            text-shadow: 0 0 5px rgba(0, 212, 255, 0.5);
        }

        .status-badge {
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            text-transform: uppercase;
            font-size: 0.9em;
            letter-spacing: 1px;
        }

        .status-excellent {
            background: linear-gradient(45deg, #00d4ff, #00ff88);
            color: #000;
            box-shadow: 0 0 15px rgba(0, 212, 255, 0.5);
        }

        .status-good {
            background: linear-gradient(45deg, #00ff88, #00d4ff);
            color: #000;
            box-shadow: 0 0 15px rgba(0, 255, 136, 0.5);
        }

        .status-moderate {
            background: linear-gradient(45deg, #ffaa00, #ff8800);
            color: #000;
            box-shadow: 0 0 15px rgba(255, 170, 0, 0.5);
        }

        .status-poor {
            background: linear-gradient(45deg, #ff4444, #ff0066);
            color: #fff;
            box-shadow: 0 0 15px rgba(255, 68, 68, 0.5);
        }

        .analysis-section {
            background: rgba(26, 26, 46, 0.9);
            border-radius: 25px;
            padding: 30px;
            margin-top: 30px;
            box-shadow: 0 15px 35px rgba(255, 119, 198, 0.2);
            border: 2px solid rgba(255, 119, 198, 0.3);
            animation: slideInUp 1s ease-out;
            backdrop-filter: blur(10px);
        }

        .analysis-section h3 {
            color: #ff77c8;
            margin-bottom: 20px;
            font-size: 1.8em;
            display: flex;
            align-items: center;
            gap: 12px;
            text-shadow: 0 0 10px rgba(255, 119, 200, 0.5);
        }

        .tip-item {
            background: rgba(255, 119, 198, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            border-left: 4px solid #ff77c8;
            transition: all 0.3s ease;
        }

        .tip-item:hover {
            transform: translateX(10px);
            box-shadow: 0 10px 25px rgba(255, 119, 198, 0.3);
        }

        .tip-item h4 {
            color: #ff77c8;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .tip-item p {
            color: #b8b8b8;
            line-height: 1.6;
        }

        .error-message {
            background: rgba(255, 68, 68, 0.2);
            border: 2px solid #ff4444;
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            color: #ff4444;
            font-size: 1.2em;
            margin: 50px auto;
            max-width: 600px;
            backdrop-filter: blur(10px);
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-40px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(40px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        @keyframes shimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        @media (max-width: 768px) {
            .results-grid {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2.5em;
            }
        }

        .weather-current {
            margin-bottom: 30px;
        }

        .weather-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .weather-card {
            background: rgba(0, 212, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            border: 1px solid rgba(0, 212, 255, 0.3);
            transition: all 0.3s ease;
        }

        .weather-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 212, 255, 0.3);
        }

        .weather-card h4 {
            color: #00d4ff;
            margin-bottom: 10px;
            font-size: 1em;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .weather-value {
            font-size: 2em;
            font-weight: bold;
            color: #fff;
            text-shadow: 0 0 10px rgba(0, 212, 255, 0.5);
        }

        .season-insights {
            margin-bottom: 30px;
        }

        .season-insights h4 {
            color: #ff77c8;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .season-insights p {
            color: #b8b8b8;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .insights-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .insight-card {
            background: rgba(255, 119, 198, 0.1);
            border-radius: 15px;
            padding: 20px;
            border: 1px solid rgba(255, 119, 198, 0.3);
        }

        .insight-card h5 {
            color: #ff77c8;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .insight-card ul {
            list-style: none;
            padding: 0;
        }

        .insight-card li {
            color: #b8b8b8;
            padding: 5px 0;
            border-bottom: 1px solid rgba(255, 119, 198, 0.2);
        }

        .insight-card li:last-child {
            border-bottom: none;
        }

        .weather-forecast {
            margin-top: 30px;
        }

        .weather-forecast h4 {
            color: #00d4ff;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .forecast-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
        }

        .forecast-card {
            background: rgba(0, 212, 255, 0.1);
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            border: 1px solid rgba(0, 212, 255, 0.3);
            transition: all 0.3s ease;
        }

        .forecast-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 212, 255, 0.3);
        }

        .forecast-day {
            color: #00d4ff;
            font-weight: bold;
            margin-bottom: 8px;
        }

        .forecast-temp {
            font-size: 1.5em;
            font-weight: bold;
            color: #fff;
            margin-bottom: 5px;
        }

        .forecast-condition {
            color: #b8b8b8;
            font-size: 0.9em;
            margin-bottom: 10px;
        }

        .forecast-details {
            display: flex;
            flex-direction: column;
            gap: 3px;
            font-size: 0.8em;
            color: #b8b8b8;
        }

        @media (max-width: 768px) {
            .insights-grid {
                grid-template-columns: 1fr;
            }
            
            .forecast-grid {
                grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            }
        }

        /* Floating particles */
        .floating-particle {
            position: fixed;
            width: 4px;
            height: 4px;
            background: #00d4ff;
            border-radius: 50%;
            pointer-events: none;
            animation: float 5s infinite linear;
            z-index: 1;
        }

        @keyframes float {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-100px) rotate(360deg);
                opacity: 0;
            }
        }

        /* Celebration animation */
        .celebration {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(45deg, #00d4ff, #ff77c8);
            padding: 30px 50px;
            border-radius: 20px;
            text-align: center;
            z-index: 1000;
            animation: celebrationPop 0.5s ease-out;
        }

        .celebration-text {
            font-size: 2em;
            font-weight: bold;
            color: #000;
            margin-bottom: 15px;
        }

        .celebration-stars {
            font-size: 1.5em;
            animation: starTwinkle 0.5s infinite alternate;
        }

        @keyframes celebrationPop {
            0% {
                transform: translate(-50%, -50%) scale(0);
                opacity: 0;
            }
            50% {
                transform: translate(-50%, -50%) scale(1.2);
            }
            100% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 1;
            }
        }

        @keyframes starTwinkle {
            0% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        /* Enhanced hover effects */
        .result-card {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .result-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 25px 50px rgba(0, 212, 255, 0.4);
        }

        /* Glowing effect for high scores */
        .suitability-score {
            animation: glowPulse 2s ease-in-out infinite alternate;
        }

        @keyframes glowPulse {
            0% {
                text-shadow: 0 0 20px rgba(0, 212, 255, 0.8);
            }
            100% {
                text-shadow: 0 0 40px rgba(0, 212, 255, 1), 0 0 60px rgba(0, 212, 255, 0.5);
            }
        }

        /* Weather card animations */
        .weather-card {
            transition: all 0.3s ease;
        }

        .weather-card:hover {
            transform: translateY(-8px) rotate(2deg);
            box-shadow: 0 20px 40px rgba(0, 212, 255, 0.4);
        }

        /* Forecast card animations */
        .forecast-card {
            transition: all 0.3s ease;
        }

        .forecast-card:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 15px 30px rgba(0, 212, 255, 0.3);
        }

        /* Tip item animations */
        .tip-item {
            transition: all 0.3s ease;
        }

        .tip-item:hover {
            transform: translateX(15px) scale(1.02);
            box-shadow: 0 15px 35px rgba(255, 119, 198, 0.4);
        }

        /* Back button enhancement */
        .back-btn {
            animation: backButtonGlow 2s ease-in-out infinite alternate;
        }

        @keyframes backButtonGlow {
            0% {
                box-shadow: 0 5px 15px rgba(0, 212, 255, 0.3);
            }
            100% {
                box-shadow: 0 10px 25px rgba(0, 212, 255, 0.6);
            }
        }

        /* Score bar enhancement */
        .score-fill {
            position: relative;
            overflow: hidden;
        }

        .score-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        /* AI Assistant Styles */
        .ai-assistant {
            position: fixed !important;
            bottom: 30px !important;
            right: 30px !important;
            z-index: 99999 !important;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            transform: none !important;
            transition: none !important;
            pointer-events: auto !important;
            will-change: auto !important;
        }
        .ai-assistant * {
            transform: none !important;
            transition: none !important;
        }
        @media (max-width: 900px) {
            .ai-assistant {
                width: 52px;
                height: 52px;
                bottom: 20px !important;
                right: 20px !important;
            }
        }
        @media (max-width: 600px) {
            .ai-assistant {
                width: 44px;
                height: 44px;
                bottom: 16px !important;
                right: 16px !important;
            }
        }
        .ai-assistant--move-up {
            /* Will be set dynamically by JS */
        }

        .ai-assistant-toggle {
            background: linear-gradient(45deg, #00d4ff, #ff77c8);
            color: white;
            border: none;
            border-radius: 25px;
            padding: 8px 14px;
            min-width: unset;
            max-width: 120px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
            font-size: 14px;
            box-shadow: 0 8px 25px rgba(0, 212, 255, 0.3);
            transition: all 0.3s ease;
            animation: pulse 2s infinite;
        }

        .ai-assistant-toggle:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(0, 212, 255, 0.4);
        }

        .ai-assistant-panel {
            position: absolute;
            bottom: 80px;
            right: 0;
            width: 350px;
            height: 500px;
            background: rgba(10, 10, 10, 0.95);
            border: 2px solid rgba(0, 212, 255, 0.3);
            border-radius: 20px;
            backdrop-filter: blur(15px);
            display: none;
            flex-direction: column;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        .ai-assistant-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            border-bottom: 1px solid rgba(0, 212, 255, 0.2);
            background: rgba(0, 212, 255, 0.05);
            border-radius: 18px 18px 0 0;
        }

        .ai-assistant-title {
            display: flex;
            align-items: center;
            gap: 10px;
            color: #00d4ff;
            font-weight: 600;
            font-size: 16px;
        }

        .ai-assistant-close {
            background: transparent;
            border: none;
            color: #b8b8b8;
            cursor: pointer;
            font-size: 18px;
            padding: 5px;
            border-radius: 5px;
            transition: all 0.3s ease;
        }

        .ai-assistant-close:hover {
            color: #ff77c8;
            background: rgba(255, 119, 200, 0.1);
        }

        .ai-assistant-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .ai-message {
            display: flex;
            gap: 10px;
            animation: slideInUp 0.3s ease-out;
        }

        .ai-message.ai-user {
            flex-direction: row-reverse;
        }

        .ai-avatar {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            flex-shrink: 0;
        }

        .ai-bot .ai-avatar {
            background: linear-gradient(45deg, #00d4ff, #ff77c8);
            color: white;
        }

        .ai-user .ai-avatar {
            background: linear-gradient(45deg, #ff77c8, #00d4ff);
            color: white;
        }

        .ai-content {
            background: rgba(255, 255, 255, 0.1);
            padding: 12px 16px;
            border-radius: 15px;
            max-width: 250px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .ai-content p {
            margin: 0 0 8px 0;
            color: #fff;
            font-size: 14px;
            line-height: 1.4;
        }

        .ai-content ul {
            margin: 8px 0;
            padding-left: 20px;
            color: #fff;
            font-size: 13px;
        }

        .ai-content li {
            margin: 4px 0;
        }

        .ai-user .ai-content {
            background: rgba(0, 212, 255, 0.2);
            border-color: rgba(0, 212, 255, 0.3);
        }

        .ai-assistant-input {
            display: flex;
            gap: 10px;
            padding: 20px;
            border-top: 1px solid rgba(0, 212, 255, 0.2);
            background: rgba(0, 212, 255, 0.05);
            border-radius: 0 0 18px 18px;
        }

        .ai-assistant-input input {
            flex: 1;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(0, 212, 255, 0.3);
            border-radius: 25px;
            padding: 12px 20px;
            color: #fff;
            font-size: 14px;
            outline: none;
            transition: all 0.3s ease;
        }

        .ai-assistant-input input:focus {
            border-color: #00d4ff;
            box-shadow: 0 0 15px rgba(0, 212, 255, 0.3);
        }

        .ai-assistant-input input::placeholder {
            color: #b8b8b8;
        }

        .ai-assistant-input button {
            background: linear-gradient(45deg, #00d4ff, #ff77c8);
            border: none;
            border-radius: 50%;
            width: 45px;
            height: 45px;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .ai-assistant-input button:hover {
            transform: scale(1.1);
            box-shadow: 0 5px 15px rgba(0, 212, 255, 0.4);
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(0,212,255,0.3); }
            70% { box-shadow: 0 0 0 10px rgba(0,212,255,0); }
            100% { box-shadow: 0 0 0 0 rgba(0,212,255,0.3); }
        }

        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .ai-assistant-panel {
                width: 300px;
                height: 450px;
                bottom: 70px;
                right: 10px;
            }
            
            .ai-assistant-toggle {
                padding: 12px 20px;
                font-size: 13px;
            }
        }
        @media (max-width: 600px) {
            .ai-assistant--move-up {
                bottom: 120px !important;
            }
        }
    </style>
</head>
<body>
    <a href="/" class="back-btn">
        <i class="fas fa-arrow-left"></i>
        Back to Analysis
    </a>

    <div class="container">
        <div class="header">
            <h1><i class="fas fa-robot"></i> AI Analysis Results</h1>
        </div>

        {% if error %}
        <div class="error-message">
            <i class="fas fa-exclamation-triangle" style="font-size: 2em; margin-bottom: 15px;"></i>
            <h3>Analysis Error</h3>
            <p>{{ error }}</p>
        </div>
        {% else %}
        <div class="results-grid">
            <!-- Suitability Analysis -->
            <div class="result-card">
                <h3><i class="fas fa-chart-line"></i> Suitability Analysis</h3>
                <div class="suitability-score">{{ suitability_score }}%</div>
                <div class="score-bar">
                    <div class="score-fill" style="width: {{ suitability_score }}%"></div>
                </div>
                <div class="info-item">
                    <span class="info-label">Selected Crop:</span>
                    <span class="info-value">{{ selected_crop }}</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Predicted Best:</span>
                    <span class="info-value">{{ predicted_crop }}</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Season:</span>
                    <span class="info-value">{{ season }}</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Location:</span>
                    <span class="info-value">{{ location }}</span>
                </div>
            </div>

            <!-- Fertilizer Recommendation -->
            <div class="result-card">
                <h3><i class="fas fa-flask"></i> Fertilizer Recommendation</h3>
                <div style="text-align: center; margin: 20px 0;">
                    <div class="status-badge status-excellent">{{ fertilizer }}</div>
                </div>
                <div class="info-item">
                    <span class="info-label">Nitrogen (N):</span>
                    <span class="info-value">{{ weather_data.N }} kg/ha</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Phosphorus (P):</span>
                    <span class="info-value">{{ weather_data.P }} kg/ha</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Potassium (K):</span>
                    <span class="info-value">{{ weather_data.K }} kg/ha</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Soil pH:</span>
                    <span class="info-value">{{ weather_data.ph }}</span>
                </div>
            </div>

            <!-- Soil Health -->
            <div class="result-card">
                <h3><i class="fas fa-seedling"></i> Soil Health Status</h3>
                <div style="text-align: center; margin: 20px 0;">
                    {% if soil_health == "Good" %}
                        <div class="status-badge status-excellent">{{ soil_health }}</div>
                    {% elif soil_health == "Moderate" %}
                        <div class="status-badge status-moderate">{{ soil_health }}</div>
                    {% else %}
                        <div class="status-badge status-poor">{{ soil_health }}</div>
                    {% endif %}
                </div>
                <div class="info-item">
                    <span class="info-label">Temperature:</span>
                    <span class="info-value">{{ weather_data.temperature }}°C</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Humidity:</span>
                    <span class="info-value">{{ weather_data.humidity }}%</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Rainfall:</span>
                    <span class="info-value">{{ weather_data.rainfall }} mm</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Region Code:</span>
                    <span class="info-value">{{ weather_data.region_enc }}</span>
                </div>
            </div>
        </div>

        <!-- Growing Guide -->
        <div class="analysis-section">
            <h3><i class="fas fa-book-open"></i> AI-Generated Growing Guide</h3>
            
            {% for tip in analysis %}
            <div class="tip-item">
                <h4><i class="fas fa-lightbulb"></i> {{ tip.title }}</h4>
                <p>{{ tip.description }}</p>
            </div>
            {% endfor %}
        </div>

        <!-- Weather Dashboard -->
        {% if weather_dashboard %}
        <div class="analysis-section">
            <h3><i class="fas fa-cloud-sun"></i> Weather Dashboard & Forecast</h3>
            
            <!-- Current Weather -->
            <div class="weather-current">
                <div class="weather-grid">
                    <div class="weather-card">
                        <h4><i class="fas fa-thermometer-half"></i> Current Temperature</h4>
                        <div class="weather-value">{{ weather_dashboard.current_temp }}°C</div>
                    </div>
                    <div class="weather-card">
                        <h4><i class="fas fa-tint"></i> Humidity</h4>
                        <div class="weather-value">{{ weather_dashboard.humidity }}%</div>
                    </div>
                    <div class="weather-card">
                        <h4><i class="fas fa-cloud-rain"></i> Rainfall</h4>
                        <div class="weather-value">{{ weather_dashboard.rainfall }}mm</div>
                    </div>
                    <div class="weather-card">
                        <h4><i class="fas fa-wind"></i> Wind Speed</h4>
                        <div class="weather-value">{{ weather_dashboard.wind_speed }} km/h</div>
                    </div>
                    <div class="weather-card">
                        <h4><i class="fas fa-sun"></i> UV Index</h4>
                        <div class="weather-value">{{ weather_dashboard.uv_index }}</div>
                    </div>
                    <div class="weather-card">
                        <h4><i class="fas fa-eye"></i> Visibility</h4>
                        <div class="weather-value">{{ weather_dashboard.visibility }} km</div>
                    </div>
                </div>
            </div>

            <!-- Season Insights -->
            <div class="season-insights">
                <h4><i class="fas fa-info-circle"></i> Season Analysis</h4>
                <p>{{ weather_dashboard.season_insight.description }}</p>
                
                <div class="insights-grid">
                    <div class="insight-card">
                        <h5><i class="fas fa-lightbulb"></i> Growing Tips</h5>
                        <ul>
                            {% for tip in weather_dashboard.season_insight.tips %}
                            <li>{{ tip }}</li>
                            {% endfor %}
                        </ul>
                    </div>
                    <div class="insight-card">
                        <h5><i class="fas fa-exclamation-triangle"></i> Potential Risks</h5>
                        <ul>
                            {% for risk in weather_dashboard.season_insight.risks %}
                            <li>{{ risk }}</li>
                            {% endfor %}
                        </ul>
                    </div>
                </div>
            </div>

            <!-- 7-Day Forecast -->
            <div class="weather-forecast">
                <h4><i class="fas fa-calendar-alt"></i> 7-Day Weather Forecast</h4>
                <div class="forecast-grid">
                    {% for day in weather_dashboard.forecast %}
                    <div class="forecast-card">
                        <div class="forecast-day">{{ day.day }}</div>
                        <div class="forecast-temp">{{ day.temperature }}°C</div>
                        <div class="forecast-condition">{{ day.condition }}</div>
                        <div class="forecast-details">
                            <span>💧 {{ day.humidity }}%</span>
                            <span>🌧️ {{ day.rainfall_chance }}%</span>
                            <span>💨 {{ day.wind_speed }} km/h</span>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
        {% endif %}
        {% endif %}
    </div>

    <!-- AI Assistant Feature -->
    <div id="ai-assistant" class="ai-assistant">
        <div class="ai-assistant-toggle" onclick="toggleAIAssistant()">
            <i class="fas fa-robot"></i>
            <span>AI Assistant</span>
        </div>
        
        <div class="ai-assistant-panel" id="ai-panel">
            <div class="ai-assistant-header">
                <div class="ai-assistant-title">
                    <i class="fas fa-robot"></i>
                    <span>AgroGPT AI Assistant</span>
                </div>
                <button class="ai-assistant-close" onclick="toggleAIAssistant()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="ai-assistant-messages" id="ai-messages">
                <div class="ai-message ai-bot">
                    <div class="ai-avatar">
                        <i class="fas fa-robot"></i>
                    </div>
                    <div class="ai-content">
                        <p>Hello! I'm your AgroGPT AI Assistant. I can help you with:</p>
                        <ul>
                            <li>🌱 Crop recommendations and growing tips</li>
                            <li>🌡️ Weather analysis and predictions</li>
                            <li>🧪 Soil health and fertilizer advice</li>
                            <li>📊 Farming data analysis</li>
                            <li>❓ General agricultural questions</li>
                        </ul>
                        <p>How can I assist you today?</p>
                    </div>
                </div>
            </div>
            
            <div class="ai-assistant-input">
                <input type="text" id="ai-input" placeholder="Ask me anything about farming..." onkeypress="handleAIInput(event)">
                <button onclick="sendAIMessage()">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>
    </div>

    <script>
        // Animate score bars on load
        document.addEventListener('DOMContentLoaded', function() {
            const scoreFills = document.querySelectorAll('.score-fill');
            scoreFills.forEach(fill => {
                const width = fill.style.width;
                fill.style.width = '0%';
                setTimeout(() => {
                    fill.style.width = width;
                }, 500);
            });

            // Add particle effects
            createParticles();
            
            // Add celebration animation for high scores
            const suitabilityScore = parseInt(document.querySelector('.suitability-score').textContent);
            if (suitabilityScore >= 80) {
                celebrateHighScore();
            }
        });

        // Create floating particles
        function createParticles() {
            const container = document.querySelector('.container');
            for (let i = 0; i < 20; i++) {
                const particle = document.createElement('div');
                particle.className = 'floating-particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 5 + 's';
                particle.style.animationDuration = (Math.random() * 3 + 2) + 's';
                container.appendChild(particle);
            }
        }

        // Celebration animation for high scores
        function celebrateHighScore() {
            const celebration = document.createElement('div');
            celebration.className = 'celebration';
            celebration.innerHTML = `
                <div class="celebration-text">🎉 Excellent Choice! 🎉</div>
                <div class="celebration-stars">
                    <span>⭐</span><span>⭐</span><span>⭐</span><span>⭐</span><span>⭐</span>
                </div>
            `;
            document.body.appendChild(celebration);
            
            setTimeout(() => {
                celebration.remove();
            }, 3000);
        }

        // Add hover effects to result cards
        document.querySelectorAll('.result-card').forEach(card => {
            card.addEventListener('mouseenter', function() {
                this.style.transform = 'translateY(-10px) scale(1.02)';
                this.style.boxShadow = '0 25px 50px rgba(0, 212, 255, 0.4)';
            });
            
            card.addEventListener('mouseleave', function() {
                this.style.transform = 'translateY(0) scale(1)';
                this.style.boxShadow = '0 15px 35px rgba(0, 212, 255, 0.2)';
            });
        });
    </script>

    <!-- AI Assistant Feature -->
    <script>
        // AI Assistant Functions
        function toggleAIAssistant() {
            const panel = document.getElementById('ai-panel');
            const isVisible = panel.style.display === 'flex';
            panel.style.display = isVisible ? 'none' : 'flex';
        }

        function handleAIInput(event) {
            if (event.key === 'Enter') {
                sendAIMessage();
            }
        }

        function sendAIMessage() {
            const input = document.getElementById('ai-input');
            const message = input.value.trim();
            
            if (message) {
                addUserMessage(message);
                input.value = '';
                
                // Simulate AI response
                setTimeout(() => {
                    generateAIResponse(message);
                }, 1000);
            }
        }

        function addUserMessage(message) {
            const messagesContainer = document.getElementById('ai-messages');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'ai-message ai-user';
            messageDiv.innerHTML = `
                <div class="ai-avatar">
                    <i class="fas fa-user"></i>
                </div>
                <div class="ai-content">
                    <p>${message}</p>
                </div>
            `;
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function addBotMessage(message) {
            const messagesContainer = document.getElementById('ai-messages');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'ai-message ai-bot';
            messageDiv.innerHTML = `
                <div class="ai-avatar">
                    <i class="fas fa-robot"></i>
                </div>
                <div class="ai-content">
                    <p>${message}</p>
                </div>
            `;
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function generateAIResponse(userMessage) {
            const lowerMessage = userMessage.toLowerCase();
            let response = '';
            let suggestions = [];

            // Comprehensive Agriculture Knowledge Base
            const knowledgeBase = {
                // Crop Management
                'rice': {
                    response: '🌾 **Rice Cultivation Guide:**\n\n**Best Practices:**\n• Plant in well-drained clay soil with pH 6.0-6.5\n• Maintain water level 2-4 inches during growth\n• Apply NPK fertilizer (120:60:60 kg/ha)\n• Control weeds with pre-emergence herbicides\n\n**Season:** Kharif (June-September)\n**Harvest Time:** 120-150 days\n**Yield:** 4-6 tons/ha\n\n**Disease Control:**\n• Bacterial blight: Use resistant varieties\n• Blast disease: Apply fungicides\n• Stem borer: Use neem-based pesticides',
                    suggestions: ['How to increase rice yield?', 'Best rice varieties for my region', 'Rice pest control methods']
                },
                'wheat': {
                    response: '🌾 **Wheat Farming Guide:**\n\n**Optimal Conditions:**\n• Well-drained loamy soil with pH 6.0-7.5\n• Temperature: 20-25°C during growth\n• Rainfall: 400-500mm\n\n**Fertilization:**\n• Nitrogen: 120-150 kg/ha\n• Phosphorus: 60-80 kg/ha\n• Potassium: 40-60 kg/ha\n\n**Disease Management:**\n• Rust: Use resistant varieties\n• Powdery mildew: Apply fungicides\n• Aphids: Use systemic insecticides',
                    suggestions: ['Wheat varieties for different climates', 'Wheat irrigation techniques', 'Wheat storage methods']
                },
                'maize': {
                    response: '🌽 **Maize (Corn) Cultivation:**\n\n**Soil Requirements:**\n• Deep, well-drained soil\n• pH: 6.0-7.0\n• Rich in organic matter\n\n**Planting:**\n• Spacing: 60cm × 20cm\n• Depth: 3-5cm\n• Seed rate: 20-25 kg/ha\n\n**Fertilization:**\n• NPK: 150:75:75 kg/ha\n• Apply nitrogen in splits\n\n**Pest Control:**\n• Corn borer: Use Bt varieties\n• Aphids: Apply neem oil\n• Army worms: Use pheromone traps',
                    suggestions: ['Hybrid maize varieties', 'Maize intercropping', 'Corn harvesting techniques']
                },
                'cotton': {
                    response: '🧵 **Cotton Farming Guide:**\n\n**Climate Requirements:**\n• Temperature: 20-30°C\n• Rainfall: 600-1200mm\n• Frost-free period: 180-200 days\n\n**Soil:**\n• Black cotton soil preferred\n• pH: 6.0-8.0\n• Good drainage essential\n\n**Fertilization:**\n• NPK: 100:50:50 kg/ha\n• Micronutrients: Zinc, Boron\n\n**Pest Management:**\n• Bollworms: Use Bt cotton\n• Aphids: Apply systemic insecticides\n• Whitefly: Use yellow sticky traps',
                    suggestions: ['BT cotton benefits', 'Cotton picking methods', 'Cotton ginning process']
                },
                'sugarcane': {
                    response: '🎋 **Sugarcane Cultivation:**\n\n**Soil & Climate:**\n• Deep, fertile soil\n• pH: 6.5-7.5\n• Temperature: 25-35°C\n• Rainfall: 1500-2000mm\n\n**Planting:**\n• Spacing: 90cm × 30cm\n• Seed rate: 35,000-40,000 setts/ha\n• Plant in trenches\n\n**Fertilization:**\n• NPK: 250:125:125 kg/ha\n• Apply in 3-4 splits\n\n**Irrigation:**\n• Maintain soil moisture\n• Avoid waterlogging\n\n**Disease Control:**\n• Red rot: Use resistant varieties\n• Smut: Hot water treatment\n• Wilt: Crop rotation',
                    suggestions: ['Sugarcane ratooning', 'Sugar extraction process', 'Sugarcane byproducts']
                },
                'pulses': {
                    response: '🫘 **Pulses Farming Guide:**\n\n**Types & Seasons:**\n• Chickpea: Rabi season\n• Pigeon pea: Kharif season\n• Lentil: Rabi season\n• Mung bean: Summer/Kharif\n\n**Soil Requirements:**\n• Well-drained soil\n• pH: 6.0-7.5\n• Avoid waterlogging\n\n**Fertilization:**\n• Nitrogen: 20-25 kg/ha\n• Phosphorus: 40-60 kg/ha\n• Potassium: 20-30 kg/ha\n\n**Benefits:**\n• Nitrogen fixation\n• Soil improvement\n• Nutritional value\n\n**Pest Control:**\n• Pod borer: Use neem products\n• Aphids: Apply systemic insecticides',
                    suggestions: ['Pulse crop rotation', 'Pulse storage methods', 'Pulse processing techniques']
                },
                'vegetables': {
                    response: '🥬 **Vegetable Farming Guide:**\n\n**Popular Vegetables:**\n• Tomatoes: pH 6.0-7.0, spacing 60×45cm\n• Onions: pH 6.0-7.5, spacing 15×10cm\n• Potatoes: pH 5.5-6.5, spacing 60×20cm\n• Cabbage: pH 6.0-7.0, spacing 45×45cm\n\n**General Practices:**\n• Use raised beds for drainage\n• Apply organic manure\n• Practice crop rotation\n• Use drip irrigation\n\n**Pest Management:**\n• Integrated Pest Management (IPM)\n• Use neem-based products\n• Biological control methods\n• Companion planting',
                    suggestions: ['Greenhouse vegetable farming', 'Organic vegetable farming', 'Vegetable marketing strategies']
                },
                'fruits': {
                    response: '🍎 **Fruit Farming Guide:**\n\n**Popular Fruits:**\n• Mango: Tropical, pH 6.0-7.5\n• Banana: Tropical, pH 6.0-7.5\n• Citrus: Subtropical, pH 6.0-7.0\n• Apple: Temperate, pH 6.0-7.0\n\n**Orchard Management:**\n• Proper spacing (varies by fruit)\n• Regular pruning\n• Thinning for better quality\n• Mulching for moisture retention\n\n**Fertilization:**\n• Apply based on soil testing\n• Use organic manures\n• Micronutrient application\n\n**Disease Control:**\n• Regular monitoring\n• Use resistant varieties\n• Proper sanitation',
                    suggestions: ['Fruit tree grafting', 'Fruit preservation methods', 'Orchard irrigation systems']
                },
                'soil': {
                    response: '🌱 **Soil Health Management:**\n\n**Soil Types:**\n• Sandy: Good drainage, low fertility\n• Clay: High fertility, poor drainage\n• Loamy: Ideal for most crops\n• Black: Rich in minerals\n\n**Soil Testing:**\n• Test pH, NPK levels\n• Check organic matter content\n• Analyze micronutrients\n• Test every 2-3 years\n\n**Improvement Methods:**\n• Add organic matter (compost, manure)\n• Use green manure crops\n• Practice crop rotation\n• Apply lime for acidic soils\n• Use gypsum for alkaline soils\n\n**Conservation:**\n• Contour farming\n• Terracing\n• Mulching\n• Cover cropping',
                    suggestions: ['Soil testing methods', 'Organic soil amendments', 'Soil erosion control']
                },
                'fertilizer': {
                    response: '🧪 **Fertilizer Management:**\n\n**Types:**\n• **Organic:** Compost, manure, vermicompost\n• **Inorganic:** NPK, Urea, DAP\n• **Biofertilizers:** Rhizobium, Azotobacter\n\n**Application Methods:**\n• Broadcasting: Even distribution\n• Band placement: Near plant roots\n• Foliar application: Spray on leaves\n• Fertigation: Through irrigation\n\n**Best Practices:**\n• Apply based on soil test results\n• Split application for nitrogen\n• Apply at right time\n• Avoid over-application\n• Use organic + inorganic mix\n\n**Common Ratios:**\n• Rice: 120:60:60 kg/ha NPK\n• Wheat: 150:75:75 kg/ha NPK\n• Maize: 150:75:75 kg/ha NPK',
                    suggestions: ['Organic fertilizer preparation', 'Fertilizer application timing', 'Micronutrient management']
                },
                'irrigation': {
                    response: '💧 **Irrigation Systems:**\n\n**Methods:**\n• **Surface Irrigation:** Flooding, furrow\n• **Sprinkler:** Overhead, center pivot\n• **Drip:** Water-efficient, precise\n• **Subsurface:** Buried pipes\n\n**Water Management:**\n• Monitor soil moisture\n• Use tensiometers\n• Schedule based on crop stage\n• Avoid over-irrigation\n• Collect rainwater\n\n**Efficiency Tips:**\n• Use mulching\n• Practice deficit irrigation\n• Choose drought-resistant varieties\n• Improve soil structure\n• Use scheduling tools',
                    suggestions: ['Drip irrigation setup', 'Water conservation methods', 'Irrigation scheduling']
                },
                'pest': {
                    response: '🦗 **Pest Management:**\n\n**IPM (Integrated Pest Management):**\n• **Cultural:** Crop rotation, resistant varieties\n• **Biological:** Natural predators, parasites\n• **Chemical:** Pesticides (last resort)\n• **Physical:** Traps, barriers\n\n**Common Pests:**\n• **Insects:** Aphids, borers, caterpillars\n• **Diseases:** Fungal, bacterial, viral\n• **Weeds:** Annual, perennial\n\n**Control Methods:**\n• Use neem-based products\n• Apply pheromone traps\n• Release beneficial insects\n• Practice crop rotation\n• Use resistant varieties\n• Monitor regularly',
                    suggestions: ['Natural pest control methods', 'Pesticide safety guidelines', 'Beneficial insect release']
                },
                'weather': {
                    response: '🌤️ **Weather & Climate Management:**\n\n**Climate Zones:**\n• **Tropical:** High temperature, high rainfall\n• **Subtropical:** Moderate temperature\n• **Temperate:** Cool temperature\n• **Arid:** Low rainfall\n\n**Weather Monitoring:**\n• Use weather forecasts\n• Monitor temperature, humidity\n• Track rainfall patterns\n• Watch for extreme events\n\n**Adaptation Strategies:**\n• Choose suitable crops\n• Adjust planting dates\n• Use protective structures\n• Implement water management\n• Select climate-resilient varieties',
                    suggestions: ['Weather-based farming decisions', 'Climate change adaptation', 'Weather monitoring tools']
                },
                'organic': {
                    response: '🌿 **Organic Farming Guide:**\n\n**Principles:**\n• No synthetic chemicals\n• Soil health focus\n• Biodiversity promotion\n• Natural pest control\n\n**Practices:**\n• Crop rotation\n• Green manuring\n• Composting\n• Biological pest control\n• Use of organic inputs\n\n**Certification:**\n• Follow organic standards\n• Maintain records\n• Regular inspections\n• Label products properly\n\n**Benefits:**\n• Better soil health\n• Higher market value\n• Environmental protection\n• Sustainable farming',
                    suggestions: ['Organic certification process', 'Natural pest control methods', 'Organic marketing strategies']
                },
                'technology': {
                    response: '📱 **Agricultural Technology:**\n\n**Modern Tools:**\n• **Precision Farming:** GPS, sensors\n• **IoT:** Smart irrigation, monitoring\n• **Drones:** Crop monitoring, spraying\n• **AI/ML:** Yield prediction, disease detection\n\n**Digital Solutions:**\n• Farm management apps\n• Weather forecasting\n• Market price tracking\n• Soil testing kits\n• Crop advisory services\n\n**Benefits:**\n• Increased efficiency\n• Better decision making\n• Reduced costs\n• Higher yields\n• Sustainable practices',
                    suggestions: ['Precision farming setup', 'Agricultural drone usage', 'Smart farming technologies']
                },
                'marketing': {
                    response: '💰 **Agricultural Marketing:**\n\n**Marketing Channels:**\n• **Direct:** Farm to consumer\n• **Wholesale:** To traders/markets\n• **Online:** E-commerce platforms\n• **Cooperatives:** Collective marketing\n\n**Value Addition:**\n• Processing: Cleaning, grading\n• Packaging: Attractive presentation\n• Branding: Create identity\n• Certification: Quality assurance\n\n**Market Intelligence:**\n• Track price trends\n• Monitor demand patterns\n• Study competition\n• Follow government policies\n\n**Digital Marketing:**\n• Social media presence\n• Online marketplaces\n• Mobile apps\n• E-commerce platforms',
                    suggestions: ['Direct marketing strategies', 'Value addition techniques', 'Digital marketing for farmers']
                },
                'finance': {
                    response: '💳 **Agricultural Finance:**\n\n**Credit Sources:**\n• **Banks:** Crop loans, term loans\n• **Cooperatives:** Low interest rates\n• **Microfinance:** Small amounts\n• **Government:** Subsidized loans\n\n**Insurance:**\n• Crop insurance\n• Weather-based insurance\n• Livestock insurance\n• Equipment insurance\n\n**Financial Planning:**\n• Budget preparation\n• Cost-benefit analysis\n• Risk management\n• Investment planning\n\n**Government Schemes:**\n• PM-KISAN\n• Kisan Credit Card\n• Crop insurance schemes\n• Subsidy programs',
                    suggestions: ['Loan application process', 'Crop insurance details', 'Financial planning for farmers']
                },
                'storage': {
                    response: '🏪 **Post-Harvest Management:**\n\n**Storage Methods:**\n• **Traditional:** Bins, bags, containers\n• **Modern:** Silos, warehouses\n• **Cold Storage:** For perishables\n• **Controlled Atmosphere:** For fruits\n\n**Storage Conditions:**\n• Control temperature\n• Maintain humidity\n• Prevent pest infestation\n• Regular monitoring\n\n**Processing:**\n• Cleaning and grading\n• Drying and dehydration\n• Canning and preservation\n• Value addition\n\n**Transportation:**\n• Proper packaging\n• Temperature control\n• Quick delivery\n• Quality maintenance',
                    suggestions: ['Grain storage techniques', 'Cold storage setup', 'Post-harvest processing']
                }
            };

            // Enhanced response generation
            if (lowerMessage.includes('hello') || lowerMessage.includes('hi') || lowerMessage.includes('hey')) {
                response = '👋 **Hello! I\'m your AgroGPT AI Assistant.**\n\nI\'m here to help you with comprehensive agricultural guidance including:\n\n🌱 **Crop Management** - Rice, Wheat, Maize, Cotton, Sugarcane, Pulses, Vegetables, Fruits\n🧪 **Soil & Fertilizer** - Soil health, testing, organic/inorganic fertilizers\n💧 **Irrigation** - Water management, drip systems, scheduling\n🦗 **Pest Control** - IPM, natural methods, disease management\n🌤️ **Weather** - Climate adaptation, forecasting\n🌿 **Organic Farming** - Natural methods, certification\n📱 **Technology** - Modern farming tools, precision agriculture\n💰 **Marketing** - Value addition, digital marketing\n💳 **Finance** - Loans, insurance, government schemes\n🏪 **Storage** - Post-harvest management\n\n**Ask me anything about farming!** What would you like to know?';
                suggestions = ['Tell me about rice farming', 'How to improve soil health?', 'Best irrigation methods', 'Organic farming guide'];
            } else {
                // Check for specific topics
                let found = false;
                for (const [topic, data] of Object.entries(knowledgeBase)) {
                    if (lowerMessage.includes(topic)) {
                        response = data.response;
                        suggestions = data.suggestions;
                        found = true;
                        break;
                    }
                }

                // Check for specific questions
                if (!found) {
                    if (lowerMessage.includes('yield') || lowerMessage.includes('production')) {
                        response = '📈 **Yield Improvement Strategies:**\n\n**Soil Management:**\n• Regular soil testing and amendment\n• Use of organic matter\n• Proper pH management\n• Micronutrient application\n\n**Crop Management:**\n• Select high-yielding varieties\n• Optimal planting density\n• Timely operations\n• Crop rotation\n\n**Nutrient Management:**\n• Balanced fertilization\n• Split application\n• Foliar feeding\n• Micronutrient application\n\n**Water Management:**\n• Efficient irrigation\n• Drainage improvement\n• Water conservation\n• Drought-resistant varieties\n\n**Pest Management:**\n• IPM approach\n• Regular monitoring\n• Preventive measures\n• Biological control';
                        suggestions = ['How to increase rice yield?', 'Best fertilizers for wheat', 'Water management for crops'];
                    } else if (lowerMessage.includes('disease') || lowerMessage.includes('sick')) {
                        response = '🏥 **Crop Disease Management:**\n\n**Common Diseases:**\n• **Fungal:** Rust, blight, powdery mildew\n• **Bacterial:** Bacterial blight, wilt\n• **Viral:** Mosaic, yellow dwarf\n• **Nematodes:** Root-knot, cyst\n\n**Prevention:**\n• Use resistant varieties\n• Crop rotation\n• Seed treatment\n• Field sanitation\n• Balanced nutrition\n\n**Control Methods:**\n• Cultural practices\n• Biological control\n• Chemical treatment\n• Integrated approach\n\n**Monitoring:**\n• Regular field inspection\n• Early detection\n• Proper identification\n• Timely action';
                        suggestions = ['How to identify crop diseases?', 'Natural disease control', 'Resistant crop varieties'];
                    } else if (lowerMessage.includes('seed') || lowerMessage.includes('planting')) {
                        response = '🌱 **Seed & Planting Guide:**\n\n**Seed Selection:**\n• Choose certified seeds\n• Select suitable varieties\n• Check germination rate\n• Consider climate adaptation\n\n**Seed Treatment:**\n• Fungicide treatment\n• Biofertilizer coating\n• Hot water treatment\n• Priming techniques\n\n**Planting Methods:**\n• Direct seeding\n• Transplanting\n• Broadcasting\n• Line sowing\n\n**Optimal Conditions:**\n• Right temperature\n• Proper moisture\n• Good soil preparation\n• Correct depth\n\n**Spacing Guidelines:**\n• Crop-specific spacing\n• Population density\n• Row arrangement\n• Intercropping patterns';
                        suggestions = ['Best seed varieties', 'Seed treatment methods', 'Optimal planting time'];
                    } else if (lowerMessage.includes('harvest') || lowerMessage.includes('harvesting')) {
                        response = '🌾 **Harvesting Guide:**\n\n**Harvest Timing:**\n• Monitor crop maturity\n• Check moisture content\n• Observe color changes\n• Test grain hardness\n\n**Harvesting Methods:**\n• Manual harvesting\n• Mechanical harvesting\n• Combine harvesting\n• Selective harvesting\n\n**Post-Harvest Care:**\n• Immediate drying\n• Proper cleaning\n• Safe storage\n• Quality maintenance\n\n**Harvesting Tips:**\n• Avoid wet conditions\n• Use sharp tools\n• Handle carefully\n• Sort properly\n• Grade quality';
                        suggestions = ['When to harvest rice?', 'Harvesting equipment', 'Post-harvest storage'];
                    } else if (lowerMessage.includes('profit') || lowerMessage.includes('income') || lowerMessage.includes('money')) {
                        response = '💰 **Profit Maximization:**\n\n**Cost Reduction:**\n• Efficient resource use\n• Bulk purchasing\n• Labor optimization\n• Technology adoption\n\n**Value Addition:**\n• Processing and packaging\n• Brand development\n• Direct marketing\n• Quality improvement\n\n**Market Strategies:**\n• Market research\n• Price monitoring\n• Timing sales\n• Multiple channels\n\n**Diversification:**\n• Multiple crops\n• Livestock integration\n• Agro-tourism\n• Value-added products\n\n**Government Support:**\n• Subsidies and schemes\n• Insurance coverage\n• Credit facilities\n• Training programs';
                        suggestions = ['High-profit crops', 'Value addition ideas', 'Government schemes for farmers'];
                    } else {
                        response = '🤔 **I understand your question about agriculture!**\n\nWhile I have comprehensive knowledge about farming, I\'d love to help you more specifically. Could you please ask about:\n\n🌱 **Specific crops** (rice, wheat, maize, cotton, sugarcane, pulses, vegetables, fruits)\n🧪 **Soil and fertilizers** (soil health, testing, organic/inorganic fertilizers)\n💧 **Irrigation and water management**\n🦗 **Pest and disease control**\n🌤️ **Weather and climate adaptation**\n🌿 **Organic farming methods**\n📱 **Modern farming technology**\n💰 **Marketing and finance**\n🏪 **Storage and post-harvest management**\n\n**What specific aspect of farming would you like to know more about?**';
                        suggestions = ['Tell me about rice farming', 'How to improve soil health?', 'Best irrigation methods', 'Organic farming guide'];
                    }
                }
            }

            addBotMessage(response);
            
            // Add suggestions if available
            if (suggestions.length > 0) {
                setTimeout(() => {
                    addBotMessage('💡 **Related Questions You Might Ask:**\n\n' + suggestions.map(s => '• ' + s).join('\n'));
                }, 1000);
            }
        }
    </script>
</body>
</html> 